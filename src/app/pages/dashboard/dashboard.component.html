<div class="dashboard-container">
  <!-- Total Earned Card - Add this before widget-grid -->
  <mat-card class="total-earned-card">
    <mat-card-content>
      <div class="earned-content">
        <div class="earned-icon">
          <mat-icon>savings</mat-icon>
        </div>
        <div class="earned-details">
          <span class="earned-label">Total Earned</span>
          <span class="earned-value">‚Ç™{{ totalEarned | number:'1.0-0' }}</span>
        </div>
      </div>
      <div class="money-rain">
        <span class="shekel" *ngFor="let i of [1,2,3,4,5]">‚Ç™</span>
      </div>
      <div class="snow-fall">
        <span class="snowflake" *ngFor="let i of [1,2,3,4,5,6,7,8]">‚ùÑ</span>
      </div>
    </mat-card-content>
  </mat-card>

  <div class="widget-grid">
    <!-- Tennis Lessons Card -->
    <mat-card class="widget-card tennis-card">
      <mat-card-header>
        <mat-card-title>Tennis Progress</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="metric-value tennis-value">
          {{ tennisLessonsFuture }}
          <div class="tennis-subtitle">
            <div class="tennis-cost">‚Ç™{{ TENNIS_LESSON_COST }} per lesson</div>
            <div class="tennis-motivation">
              {{ totalEarned === 0 ? '(Time to earn some balls! üéæ)' : 
                 totalEarned < TENNIS_LESSON_COST ? '(Almost there! üéæ)' : 
                 '(Keep swinging! üèÉ‚Äç‚ôÇÔ∏èüí®)' }}
            </div>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Sober Streak Card -->
    <mat-card class="widget-card sober-card">
      <mat-card-header>
        <mat-card-title>Sober Streak</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="metric-value sober-value">
          {{ soberMessage }}
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Weekly Earnings Card -->
    <mat-card class="widget-card weekly-card">
      <mat-card-header>
        <mat-card-title>This Week</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="metric-value earnings-value">
          ‚Ç™{{ weeklyEarnings | number:'1.0-0' }}
          <div class="earnings-subtitle">
            <span class="trend-indicator">
              {{ weeklyTrendEmoji }}
            </span>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Monthly Earnings Card -->
    <mat-card class="widget-card monthly-card">
      <mat-card-header>
        <mat-card-title>This Month</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="metric-value earnings-value">
          ‚Ç™{{ monthlyEarnings | number:'1.0-0' }}
          <div class="earnings-subtitle">
            <span class="trend-indicator">
              {{ monthlyMessage }}
            </span>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- BMI Card -->
    <mat-card class="widget-card bmi-card">
      <mat-card-header>
        <mat-card-title>BMI</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="metric-value">
          {{ bmi || '-' }}
          <div class="bmi-category">
            {{ bmiCategory }}
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Weight Card -->
    <mat-card class="widget-card weight-card">
      <mat-card-header>
        <mat-card-title>Weight</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="metric-value">
          {{ latestEntry?.weight || '-' }} kg
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Calories Card -->
    <mat-card class="widget-card calories-card">
      <mat-card-header>
        <mat-card-title>Calories</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="metric-value">
          {{ latestEntry?.activityCalories || '-' }} kcal
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Sleep Card -->
    <mat-card class="widget-card sleep-card">
      <mat-card-header>
        <mat-card-title>Sleep</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="metric-value">
          {{ latestEntry?.sleep || '-' }} hours
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Alcohol Card -->
    <mat-card class="widget-card alcohol-card">
      <mat-card-header>
        <mat-card-title>Alcohol</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="metric-value">
          {{ latestEntry?.alcohol ? 'Yes' : 'No' }}
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <button mat-fab color="primary"
          class="add-data-fab"
          (click)="openAddDataPopup()">
    <mat-icon>add</mat-icon>
  </button>
</div>
